<link rel="stylesheet" type="text/css" href="root.css">
  <% if session[:user] %>
  <div id="welcome">
    <h1>Welcome, <%= @database_connection.sql("select username from users where id = '#{session[:user]}'").reduce["username"] %>
<% end %></h1>
<style>

  <% arr = @user_states_visited %>
  <%= p ".stately li##{arr} { color: #00ffa5; }" %>
</style>
</div>
<div class="contains">
<div class="container clearfix">
  <div class="one_third">
    <h3>Your total points: <%= @total %></h3>

    <form method="get" action="/expense">
      <button>Expense states</button>
    </form>
  </div>

  <div class="one_third">
    <form method="post" action="">
      <button>Mark your location</button>
    </form>
    <h1 id="location" style="border: 5px #00ffa5">
      <% if @location.present? %>
        <% abbr = @location.state.downcase %>
        <%= @location.city %>
        <%= ", " %>
        <%= @location.state %>
    </h1>
    <style>
      <%= p ".stately li##{abbr} { color: #00ffa5; }" %>
    </style>
      <% end %>
  </div>

  <div class="one_third">
    <ul class="horizontal-list">
      <li>
        <h1 id="refer">
          <form method="get" action="/refer">
            <button>Refer a Friend</button>
          </form>
        </h1>
      </li>
      <li>
        <h1 id="tagging">
          <form method="get" action="/">
            <button>Logout</button>
          </form>
        </h1>
      </li>
  </div>
  </ul>
</div>


<link rel="stylesheet" href="/stately/stately.css">
<ul class="stately">
  <li data-state="al" id="al">A</li>
  <li data-state="ak" id="ak">B</li>
  <li data-state="ar" id="ar">C</li>
  <li data-state="az" id="az">D</li>
  <li data-state="ca" id="ca">E</li>
  <li data-state="co" id="co">F</li>
  <li data-state="ct" id="ct">G</li>
  <li data-state="de" id="de">H</li>
  <li data-state="dc" id="dc">I</li>
  <li data-state="fl" id="fl">J</li>
  <li data-state="ga" id="ga">K</li>
  <li data-state="hi" id="hi">L</li>
  <li data-state="id" id="id">M</li>
  <li data-state="il" id="il">N</li>
  <li data-state="in" id="in">O</li>
  <li data-state="ia" id="ia">P</li>
  <li data-state="ks" id="ks">Q</li>
  <li data-state="ky" id="ky">R</li>
  <li data-state="la" id="la">S</li>
  <li data-state="me" id="me">T</li>
  <li data-state="md" id="md">U</li>
  <li data-state="ma" id="ma">V</li>
  <li data-state="mi" id="mi">W</li>
  <li data-state="mn" id="mn">X</li>
  <li data-state="ms" id="ms">Y</li>
  <li data-state="mo" id="mo">Z</li>
  <li data-state="mt" id="mt">a</li>
  <li data-state="ne" id="ne">b</li>
  <li data-state="nv" id="nv">c</li>
  <li data-state="nh" id="nh">d</li>
  <li data-state="nj" id="nj">e</li>
  <li data-state="nm" id="nm">f</li>
  <li data-state="ny" id="ny">g</li>
  <li data-state="nc" id="nc">h</li>
  <li data-state="nd" id="nd">i</li>
  <li data-state="oh" id="oh">j</li>
  <li data-state="ok" id="ok">k</li>
  <li data-state="or" id="or">l</li>
  <li data-state="pa" id="pa">m</li>
  <li data-state="ri" id="ri">n</li>
  <li data-state="sc" id="sc">o</li>
  <li data-state="sd" id="sd">p</li>
  <li data-state="tn" id="tn">q</li>
  <li data-state="tx" id="tx">r</li>
  <li data-state="ut" id="ut">s</li>
  <li data-state="va" id="va">t</li>
  <li data-state="vt" id="vt">u</li>
  <li data-state="wa" id="wa">v</li>
  <li data-state="wv" id="wv">w</li>
  <li data-state="wi" id="wi">x</li>
  <li data-state="wy" id="wy">y</li>
</ul>
</div>
<!--<style>-->
<!--<%#= @states_visited.each do |state|%>-->
/*if @location.state.visited?*/
/*return*/
/*'.stately li ''#{@states_visited}'  {*/
/*color: #00ffa5;*/
/*}*/
/*end*/
/**/
/**/
<!--</style>-->

<!--<div id="mapdiv" style="margin-left: auto; margin-right: auto; width: 90%;; height: 450px;"></div>​-->
<!--<link href="http://www.nps.gov/npmap/bootstrap/dist/css/nps-bootstrap.min.css" rel="stylesheet">-->
<!--<link rel="stylesheet" href="http://libs.cartocdn.com/cartodb.js/v3/themes/css/cartodb.css" />-->

<!--<script src="http://libs.cartocdn.com/cartodb.js/v3/cartodb.js"></script>-->
<!--<script>-->
<!--//  var NPMap;-->
<!--////  NPMap = new L.Map('mapdiv', {-->
<!--//  NPMap = {-->
<!--//    baseLayers: [-->
<!--//      'nps-satelliteNight',-->
<!--//    ],-->
<!--//    center: {-->
<!--//      lat: 37.1007454,-->
<!--//      lng: -96.900-->
<!--//    },-->
<!--//    div: 'mapdiv',-->
<!--//    fullscreenControl: true,-->
<!--//    asdf: 'asdf',-->
<!--//    overlays: [-->
<!--//      {-->
<!--//        name: 'usahigh',-->
<!--//        clickable: false,-->
<!--//        table: 'usahigh',-->
<!--//        type: 'cartodb',-->
<!--//        user: 'cpbuckingham',-->
<!--//        cartocss: "#usahigh{" +-->
<!--//          "line-color: black;" +-->
<!--//          "line-width: 3;" +-->
<!--//          "polygon-fill: #00ffa5;" +-->
<!--//          "}"-->
<!--////          "[geo_id = 'CA'] {" +-->
<!--////          "polygon-fill: white" +-->
<!--////          "}"-->
<!--//      }-->
<!--//    ],-->
<!--//    maxZoom: 8,-->
<!--//    minZoom: 2,-->
<!--//    scrollWheelZoom: false,-->
<!--//    zoom: 4-->
<!--//  };-->
<!--//  console.log(NPMap, 'L');-->
<!--//-->
<!--//  L.geoJson(geojson, { style: L.mapbox.simplestyle.style }).addTo(map);-->
<!--//  // For testing this object, we are making the NPMap object availible in the console by assigning it to the window object.-->
<!--//  window.cam = NPMap;-->
<!--//  // We will delete this in a bit, but check it out. In the console: cam.L returns an object now.-->
<!--////  });-->
<!--//  (function () {-->
<!--//    var s = document.createElement('script');-->
<!--//    s.src = 'http://www.nps.gov/npmap/npmap.js/2.0.0/npmap-bootstrap.min.js';-->
<!--//    document.body.appendChild(s);-->

<!--//    window.onload = function() {-->
<!--//      cartodb.createLayer(NPMap, 'http://documentation.cartodb.com/api/v2/viz/2b13c956-e7c1-11e2-806b-5404a6a683d5/viz.json')-->
<!--//        .addTo(NPMap)-->
<!--//        .on('done', function(layer) {-->
<!--//          //do stuff-->
<!--//        })-->
<!--//        .on('error', function(err) {-->
<!--//          alert("some error occurred: " + err);-->
<!--//        });-->
<!--//    }-->
<!--//    document.addEventListener('click', myfunction, false);-->

<!--//    var myfunction = function() {-->
<!--//      update layer on map-->
<!--//    };-->

<!--})();-->
<!--</script>-->

<!--<div id="mapdiv" style="margin-left: auto; margin-right: auto; width: 90%;; height: 450px;"></div>​-->
<!--<script src="http://www.amcharts.com/lib/3/ammap.js" type="text/javascript"></script>-->
<!--<script src="http://www.amcharts.com/lib/3/maps/js/usaHigh.js" type="text/javascript"></script>-->
<!--<div id="map"></div>-->
<!--<script type="text/javascript">-->
<!--//  var map;-->
<!--//  AmCharts.ready(function() {-->
<!--//    map                  = new AmCharts.AmMap();-->
<!--//    map.pathToImages     = "http://www.amcharts.com/lib/3/images/";-->
<!--//    map.panEventsEnabled = true;-->
<!--//    map.backgroundColor  = "#535364";-->
<!--//    map.backgroundAlpha  = 1;-->
<!--//    map.zoomControl.panControlEnabled  = true;-->
<!--//    map.zoomControl.zoomControlEnabled = true;-->
<!--//    var dataProvider     = {-->
<!--//      mapVar          : AmCharts.maps.usaHigh,-->
<!--//      getAreasFromMap : true,-->
<!--//      areas           : [-->
<!--//      ]-->
<!--//    };-->
<!--//    map.dataProvider     = dataProvider;-->
<!--//    map.areasSettings    = {-->
<!--//      autoZoom             : true,-->
<!--//      color                : "#CDCDCD",-->
<!--//      colorSolid           : "#5EB7DE",-->
<!--//      selectedColor        : "#5EB7DE",-->
<!--//      outlineColor         : "#666666",-->
<!--//      rollOverColor        : "#88CAE7",-->
<!--//      rollOverOutlineColor : "#FFFFFF"-->
<!--//    };-->
<!--//    map.write("mapdiv");-->
<!--//  });-->
<!--</script>-->







